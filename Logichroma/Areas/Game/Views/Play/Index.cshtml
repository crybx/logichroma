@using Logichroma.GameEngine.Enums
@model Logichroma.Areas.Game.Models.GameDetailsViewModel
@{
    ViewBag.Title = "Logichroma";
}

<h2>@Model.Game.Name</h2>

<div>
    <label>@Model.Game.GamePlayers.Count player(s) in this game:</label>
    <ul>
        @foreach (var player in Model.Game.PlayersInOrder)
        {
            <li>@player.DisplayName</li>
        }
    </ul>
</div>

<div>
    <table class="table">
        <tr>
            <td>
                Game Status
            </td>
            <td>
                @Model.Game.Status
            </td>
        </tr>
        <tr>
            <td>
                Cards Remaining in Deck
            </td>
            <td>
                @Model.DeckCount
            </td>
        </tr>
        <tr>
            <td>
                Current Player
            </td>
            <td>
                @Model.CurrentPlayer.DisplayName
            </td>
        </tr>
    </table>
</div>

<h3>Player Hands:</h3>
@foreach (var player in Model.Game.PlayersInOrder)
{
    var playerCards = Model.Game.GameCards.Where(x => x.GamePlayerId == player.GamePlayerId);

    <div>Player @(player.PlayerNumber + 1) - @player.DisplayName</div>
    <div class="deck">
        @foreach (var card in playerCards)
        {
            if (player == Model.Player)
            {
                <div class="card" style="background-color: gray;">
                    <div class="card-container">
                        <p style="color: darkgray">
                            ?
                        </p>
                    </div>
                </div>
            }
            else
            {
                <div class="card" style="background-color: @card.CardSuit.BackgroundColor;">
                    <div class="card-container">
                        <p style="color: @card.CardSuit.TextColor">
                            @card.CardValue.FaceValue
                        </p>
                    </div>
                </div>
            }
        }
    </div>
    <div class="clear"></div>
}

<h3>The remaining deck is:</h3>
<div class="deck">
    @foreach (var card in Model.Game.GameCards.Where(x => x.CardState == CardState.Deck.ToString()))
    {
        <div class="card" style="background-color: @card.CardSuit.BackgroundColor;">
            <div class="card-container">
                <p style="color: @card.CardSuit.TextColor">
                    @card.CardValue.FaceValue
                </p>
            </div>
        </div>
    }
</div>
<div class="clear"></div>
