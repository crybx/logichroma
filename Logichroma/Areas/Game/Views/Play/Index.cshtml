@using Logichroma.GameEngine.Enums
@model Logichroma.Areas.Game.Models.GameDetailsViewModel
@{
    ViewBag.Title = "Logichroma";
}

<h2>@Model.Game.Name</h2>

<!-- DECK -->
<div>
    <h3>Deck:</h3>
    <div class="card-stack">
        <div class="card" style="background-color: gray;">
            <div class="card-container">
                <p style="color: darkgray">
                    (@Model.DeckCount)
                </p>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</div>

<!-- PLAYER HANDS -->
<div>
    <h3>Players:</h3>
    @foreach (var player in Model.Game.PlayersInOrder)
    {
        var playerCards = Model.Game.GameCards.Where(x => x.GamePlayerId == player.GamePlayerId);

        <div>Player @(player.PlayerNumber + 1) - @player.DisplayName</div>
        <div class="card-stack">
            @foreach (var card in playerCards)
            {
                if (player == Model.Player)
                {
                    <div class="card" style="background-color: gray;">
                        <div class="card-container">
                            <p style="color: darkgray">
                                ?
                            </p>
                        </div>
                    </div>
                }
                else
                {
                    <div class="card" style="background-color: @card.CardSuit.BackgroundColor;">
                        <div class="card-container">
                            <p style="color: @card.CardSuit.TextColor">
                                @card.CardValue.FaceValue
                            </p>
                        </div>
                    </div>
                }
            }
        </div>
        <div class="clear"></div>
    }
</div>

<!-- PLAY STACKS -->
@if (Model.Game.GameCards.Any(x => x.CardState == CardState.Played.ToString()))
{
    <div>
        <h3>Play Stacks:</h3>
        <div class="card-stack">
            @foreach (var card in Model.Game.GameCards.Where(x => x.CardState == CardState.Played.ToString()))
            {
                <div class="card" style="background-color: @card.CardSuit.BackgroundColor;">
                    <div class="card-container">
                        <p style="color: @card.CardSuit.TextColor">
                            @card.CardValue.FaceValue
                        </p>
                    </div>
                </div>
            }
        </div>
        <div class="clear"></div>
    </div>
}

<!-- DISCARD PILE -->
@if (Model.Game.GameCards.Any(x => x.CardState == CardState.Discard.ToString()))
{
    <div>
        <h3>Discards:</h3>
        <div class="card-stack">
            @foreach (var card in Model.Game.GameCards.Where(x => x.CardState == CardState.Discard.ToString()))
            {
                <div class="card" style="background-color: @card.CardSuit.BackgroundColor;">
                    <div class="card-container">
                        <p style="color: @card.CardSuit.TextColor">
                            @card.CardValue.FaceValue
                        </p>
                    </div>
                </div>
            }
        </div>
        <div class="clear"></div>
    </div>
}
